<!DOCTYPE html>
<html>
<head><title>FIR</title></head>
<body>

<div>
<ol>
<li>Complainant Name:<input id="1"></li>
<li>Father/Husband Name:<input id="2"></li>
<li>DOB:<input id="3" type="date"></li>
<li>Nationality:<input id="4"></li>
<li>Occupation:<input id="5"></li>
<li>Age:<input id="6" type="number"</li>
<li>Gender:<select id="7"><option>Male</option><option>Female</option><option>Other</option></select></li></li>
<li>Address:<input id="8"></li>
<li>Phone/Email:<input id="9"></li>
<li>Holiday(yes/no):<select id="10"><option>yes</option><option>no</option></select></li>
<li>Holiday name:<input id="11"></li>
<li>Festival(yes/no):<select id="12"><option>yes</option><option>no</option></select></li></li>
<li>Festival name:<input id="13"></li>
<li>Weapon used:<input id="14"></li>
<li>Date:<input id="15" type="date"></li>
<li>Start Time:<input id="16" type="time"></li>
<li>End Time:<input id="17" type="time"></li>
<li>Time(Morning/Afternoon...):<input id="18"></li>
<li>Place of Incident:<input id="19"></li>
<li>Location of Incident:<input id="20"></li>
<li>Type of Incident:<input id="21"></li>
</ol>

<button onclick="create()">SUBMIT</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function getCurrentDateTime() {
    const now = new Date();
    const day = String(now.getDate()).padStart(2, '0');
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const year = now.getFullYear();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    return `${day}/${month}/${year} ${hours}:${minutes} hrs`;
}

function getDayName(dateString) {
    if (!dateString) return "";
    const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
    return days[new Date(dateString).getDay()];
}

function create() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let e = [];
    for (let i = 1; i <= 21; i++) {
        e[i] = document.getElementById(i.toString())?.value || "";
    }

    doc.setFont("helvetica", "normal");

    doc.setFontSize(16);
    doc.text("FIRST INFORMATION REPORT", 105, 15, { align: "center" });

    doc.setFontSize(11);
    doc.text("(Under Section 154 Cr.P.C.)", 105, 22, { align: "center" });

    let y = 35;

    doc.text("1. District: SUNDARGARH", 14, y);
    doc.text("P.S.: RAIBOGA", 90, y);
    doc.text("Year: " + new Date().getFullYear(), 160, y);

    y += 8;
    doc.text("FIR No.: 0001", 14, y);
    doc.text("Date & Time of FIR: " + getCurrentDateTime(), 90, y);

    y += 12;
    doc.setFontSize(12);
    doc.text("2. Acts and Sections", 14, y);
    doc.setFontSize(11);

    y += 8;
    doc.text("Act: IPC 1860", 20, y);
    doc.text("Section: 279, 304-A", 120, y);

    y += 12;
    doc.setFontSize(12);
    doc.text("3. Occurrence of Offence", 14, y);
    doc.setFontSize(11);

    y += 8;
    doc.text("Day: " + getDayName(e[15]), 20, y);
    doc.text("Date: " + e[15], 80, y);

    y += 7;
    doc.text("Time From: " + e[16], 20, y);
    doc.text("Time To: " + e[17], 120, y);

    y += 7;
    doc.text("Information received at P.S.: " + getCurrentDateTime(), 20, y);

    y += 12;
    doc.setFontSize(12);
    doc.text("4. Type of Information: Written", 14, y);

    y += 12;
    doc.setFontSize(12);
    doc.text("5. Place of Occurrence", 14, y);
    doc.setFontSize(11);

    y += 8;
    doc.text("Address: " + e[8], 20, y);

    y += 12;
    doc.setFontSize(12);
    doc.text("6. Complainant / Informant", 14, y);
    doc.setFontSize(11);

    y += 8;
    doc.text("Name: " + e[1], 20, y);
    y += 7;
    doc.text("Father/Husband Name: " + e[2], 20, y);
    y += 7;
    doc.text("DOB: " + e[3], 20, y);
    doc.text("Nationality: " + e[4], 120, y);

    y += 20;
    doc.text("Signature of Complainant:", 20, y);

    let signatureImg = localStorage.getItem("signaturePic");
    if (signatureImg) {
        doc.addImage(signatureImg, "PNG", 20, y + 5, 50, 25);
    } else {
        doc.text("Not Available", 60, y);
    }

    let FIR=doc.output("FIR_Report.pdf");
    localStorage.setItem("fir",FIR);
    alert("PDF saved");
}
</script>

</body>
</html>
